---

# Generate validation results summary (console output only)
- name: "Compile validation results"
  set_fact:
    validation_report:
      timestamp: "{{ ansible_date_time.iso8601 }}"
      vm_name: "{{ config_vm_name }}"
      environment: "{{ config_vm_environment }}"
      validations:
        config: "{{ validation_results.config | default('PASSED') }}"
        resources: "{{ validation_results.resources | default('PASSED') }}"
        network: "{{ validation_results.network | default('PASSED') }}"
      warnings: "{{ validation_warnings | default([]) }}"
  tags: validation

- name: "Display validation summary"
  ansible.builtin.debug:
    msg: "Validation compdddddddddddddddddddddddddalidation_report.validations.network }}"
  tags: validation

- name: "Fail if any validation failed"
  ansible.builtin.fail:
    msg: "Validation failed. Check results above."
  when: >
    validation_report.validations.config != 'PASSED' or
    validation_report.validations.resources != 'PASSED' or
    validation_report.validations.network != 'PASSED'
  tags: validation